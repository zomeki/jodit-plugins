{"version":3,"file":"index.module.mjs","sources":["../src/plugin.js","../src/lang.js","../src/index.js"],"sourcesContent":["import { Jodit } from 'jodit';\n\nexport default class {\n  init(jodit) {\n    this.jodit = jodit;\n\n    this.onDblClickFunc = this.onDblClick.bind(this);\n    this.jodit.events.on('dblclick', this.onDblClickFunc);\n  }\n\n  destruct() {\n    this.jodit.events.off('dblclick', this.onDblClickFunc);\n  }\n\n  onDblClick(event) {\n    if (event.target.tagName === 'JODIT-MEDIA') {\n      const video = event.target.querySelector('video');\n      if (video) {\n        this.showDialog(video, event.target);\n        event.preventDefault();\n      }\n    }\n  }\n\n  showDialog(video, wrapper) {\n    const dialog = this.jodit.dlg({\n      closeOnClickOverlay: true,\n      closeOnEsc: true,\n      buttons: ['fullsize', 'dialog.close']\n    });\n\n    const { UIForm, UIInput, Button } = Jodit.modules;\n\n    const form = new UIForm(this.jodit);\n    form.container.classList.add('jodit-ui-form__video-properties');\n\n    const input = {\n      src: new UIInput(this.jodit, {\n        name: 'src',\n        label: 'URL',\n        required: true\n      }),\n      width: new UIInput(this.jodit, {\n        name: 'width',\n        label: this.jodit.i18n('Width')\n      }),\n      height: new UIInput(this.jodit, {\n        name: 'height',\n        label: this.jodit.i18n('Height')\n      }),\n      poster: new UIInput(this.jodit, {\n        name: 'poster',\n        label: this.jodit.i18n('videoPropsPosterURL')\n      })\n    };\n\n    form.append(Object.values(input));\n\n    this.read(video, input);\n\n    const button = {\n      cancel: new Button(this.jodit, 'cancel', 'Cancel'),\n      apply: new Button(this.jodit, 'ok', 'Apply', 'primary')\n    };\n\n    button.apply.onAction(() => {\n      if (form.validate()) {\n        this.write(video, wrapper, input);\n        this.jodit.synchronizeValues();\n        dialog.close();\n      }\n    });\n\n    button.cancel.onAction(() => {\n      dialog.close();\n    });\n\n    dialog.setHeader(this.jodit.i18n('videoPropsProperties'));\n    dialog.setContent(form);\n    dialog.setFooter(Object.values(button));\n    dialog.setSize(500, 400);\n\n    dialog.open();\n    dialog.setModal(true);\n  }\n\n  read(video, input) {\n    ['src', 'width', 'height', 'poster'].forEach(key => {\n      input[key].value = video.getAttribute(key) || '';\n    });\n  }\n\n  write(video, wrapper, input) {\n    ['src', 'width', 'height', 'poster'].forEach(key => {\n      if (input[key].value) {\n        video.setAttribute(key, input[key].value);\n      } else {\n        video.removeAttribute(key);\n      }\n    });\n\n    ['width', 'height'].forEach(key => {\n      if (input[key].value) {\n        wrapper.style[key] = `${input[key].value}px`;\n      } else {\n        wrapper.style[key] = '';\n      }\n    });\n  }\n}\n","export default {\n  en: {\n    videoPropsPosterURL: 'Poster image URL',\n    videoPropsProperties: 'Video properties'\n  },\n  ja: {\n    videoPropsPosterURL: 'ポスター画像URL',\n    videoPropsProperties: '動画のプロパティ'\n  }\n};\n","import { Jodit } from 'jodit';\nimport Plugin from './plugin.js';\nimport lang from './lang.js';\nimport './index.scss';\n\nObject.keys(lang).forEach(locale => {\n  Jodit.lang[locale] = {\n    ...Jodit.lang[locale],\n    ...lang[locale]\n  }\n});\n\nJodit.plugins.add('video-props', Plugin);\n\nexport default Plugin;\n"],"names":["Plugin","init","jodit","this","onDblClickFunc","onDblClick","bind","events","on","destruct","off","event","target","tagName","video","querySelector","showDialog","preventDefault","wrapper","dialog","dlg","closeOnClickOverlay","closeOnEsc","buttons","UIForm","UIInput","Button","Jodit","modules","form","container","classList","add","input","src","name","label","required","width","i18n","height","poster","append","Object","values","read","button","cancel","apply","onAction","validate","write","synchronizeValues","close","setHeader","setContent","setFooter","setSize","open","setModal","forEach","key","value","getAttribute","setAttribute","removeAttribute","style","lang","en","videoPropsPosterURL","videoPropsProperties","ja","keys","locale","plugins"],"mappings":"8BAEe,MAAAA,EACbC,IAAAA,CAAKC,GACHC,KAAKD,MAAQA,EAEbC,KAAKC,eAAiBD,KAAKE,WAAWC,KAAKH,MAC3CA,KAAKD,MAAMK,OAAOC,GAAG,WAAYL,KAAKC,eACxC,CAEAK,QAAAA,GACEN,KAAKD,MAAMK,OAAOG,IAAI,WAAYP,KAAKC,eACzC,CAEAC,UAAAA,CAAWM,GACT,GAA6B,gBAAzBA,EAAMC,OAAOC,QAA2B,CAC1C,MAAMC,EAAQH,EAAMC,OAAOG,cAAc,SACrCD,IACFX,KAAKa,WAAWF,EAAOH,EAAMC,QAC7BD,EAAMM,iBAEV,CACF,CAEAD,UAAAA,CAAWF,EAAOI,GAChB,MAAMC,EAAShB,KAAKD,MAAMkB,IAAI,CAC5BC,qBAAqB,EACrBC,YAAY,EACZC,QAAS,CAAC,WAAY,mBAGlBC,OAAEA,EAAMC,QAAEA,EAAOC,OAAEA,GAAWC,EAAMC,QAEpCC,EAAO,IAAIL,EAAOrB,KAAKD,OAC7B2B,EAAKC,UAAUC,UAAUC,IAAI,mCAE7B,MAAMC,EAAQ,CACZC,IAAK,IAAIT,EAAQtB,KAAKD,MAAO,CAC3BiC,KAAM,MACNC,MAAO,MACPC,UAAU,IAEZC,MAAO,IAAIb,EAAQtB,KAAKD,MAAO,CAC7BiC,KAAM,QACNC,MAAOjC,KAAKD,MAAMqC,KAAK,WAEzBC,OAAQ,IAAIf,EAAQtB,KAAKD,MAAO,CAC9BiC,KAAM,SACNC,MAAOjC,KAAKD,MAAMqC,KAAK,YAEzBE,OAAQ,IAAIhB,EAAQtB,KAAKD,MAAO,CAC9BiC,KAAM,SACNC,MAAOjC,KAAKD,MAAMqC,KAAK,0BAI3BV,EAAKa,OAAOC,OAAOC,OAAOX,IAE1B9B,KAAK0C,KAAK/B,EAAOmB,GAEjB,MAAMa,EAAS,CACbC,OAAQ,IAAIrB,EAAOvB,KAAKD,MAAO,SAAU,UACzC8C,MAAO,IAAItB,EAAOvB,KAAKD,MAAO,KAAM,QAAS,YAG/C4C,EAAOE,MAAMC,SAAS,KAChBpB,EAAKqB,aACP/C,KAAKgD,MAAMrC,EAAOI,EAASe,GAC3B9B,KAAKD,MAAMkD,oBACXjC,EAAOkC,WAIXP,EAAOC,OAAOE,SAAS,KACrB9B,EAAOkC,UAGTlC,EAAOmC,UAAUnD,KAAKD,MAAMqC,KAAK,yBACjCpB,EAAOoC,WAAW1B,GAClBV,EAAOqC,UAAUb,OAAOC,OAAOE,IAC/B3B,EAAOsC,QAAQ,IAAK,KAEpBtC,EAAOuC,OACPvC,EAAOwC,UAAS,EAClB,CAEAd,IAAAA,CAAK/B,EAAOmB,GACV,CAAC,MAAO,QAAS,SAAU,UAAU2B,QAAQC,IAC3C5B,EAAM4B,GAAKC,MAAQhD,EAAMiD,aAAaF,IAAQ,IAElD,CAEAV,KAAAA,CAAMrC,EAAOI,EAASe,GACpB,CAAC,MAAO,QAAS,SAAU,UAAU2B,QAAQC,IACvC5B,EAAM4B,GAAKC,MACbhD,EAAMkD,aAAaH,EAAK5B,EAAM4B,GAAKC,OAEnChD,EAAMmD,gBAAgBJ,KAI1B,CAAC,QAAS,UAAUD,QAAQC,IACtB5B,EAAM4B,GAAKC,MACb5C,EAAQgD,MAAML,GAAO,GAAG5B,EAAM4B,GAAKC,UAEnC5C,EAAQgD,MAAML,GAAO,IAG3B,EC5GF,IAAeM,EAAA,CACbC,GAAI,CACFC,oBAAqB,mBACrBC,qBAAsB,oBAExBC,GAAI,CACFF,oBAAqB,YACrBC,qBAAsB,aCF1B3B,OAAO6B,KAAKL,GAAMP,QAAQa,IACxB9C,EAAMwC,KAAKM,GAAU,IAChB9C,EAAMwC,KAAKM,MACXN,EAAKM,MAIZ9C,EAAM+C,QAAQ1C,IAAI,cAAehC"}