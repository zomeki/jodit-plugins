{"version":3,"file":"index.js","sources":["../src/jodit.js","../src/plugin.js","../src/lang.js","../src/index.js"],"sourcesContent":["import * as module from 'jodit';\n\nexport default module.Jodit || module;\n","import Jodit from './jodit.js';\n\nexport default class {\n  init(jodit) {\n    this.jodit = jodit;\n\n    this.onDblClickFunc = this.onDblClick.bind(this);\n    jodit.events.on('dblclick', this.onDblClickFunc);\n  }\n\n  destruct() {\n    this.jodit.events.off('dblclick', this.onDblClickFunc);\n  }\n\n  onDblClick(event) {\n    if (event.target.tagName === 'JODIT') {\n      const iframe = event.target.querySelector('iframe');\n      if (iframe) {\n        this.showDialog(iframe, event.target);\n        event.preventDefault();\n      }\n    }\n  }\n\n  showDialog(iframe, wrapper) {\n    const dialog = this.jodit.dlg({\n      closeOnClickOverlay: true,\n      closeOnEsc: true,\n      buttons: ['fullsize', 'dialog.close']\n    });\n\n    const { UIForm, UIInput, Button } = Jodit.modules;\n\n    const form = new UIForm(this.jodit);\n    form.container.classList.add('jodit-ui-form__iframe-properties');\n\n    const input = {\n      src: new UIInput(this.jodit, {\n        name: 'src',\n        label: 'URL',\n        required: true\n      }),\n      width: new UIInput(this.jodit, {\n        name: 'width',\n        label: this.jodit.i18n('Width')\n      }),\n      height: new UIInput(this.jodit, {\n        name: 'height',\n        label: this.jodit.i18n('Height')\n      }),\n      title: new UIInput(this.jodit, {\n        name: 'title',\n        label: this.jodit.i18n('Title')\n      })\n    };\n\n    form.append(Object.values(input));\n\n    this.read(iframe, input);\n\n    const button = {\n      cancel: new Button(this.jodit, 'cancel', 'Cancel'),\n      apply: new Button(this.jodit, 'ok', 'Apply', 'primary')\n    };\n\n    button.apply.onAction(() => {\n      if (form.validate()) {\n        this.write(iframe, wrapper, input);\n        this.jodit.synchronizeValues();\n        dialog.close();\n      }\n    });\n\n    button.cancel.onAction(() => {\n      dialog.close();\n    });\n\n    dialog.setHeader(this.jodit.i18n('iframePropsProperties'));\n    dialog.setContent(form);\n    dialog.setFooter(Object.values(button));\n    dialog.setSize(500, 400);\n\n    dialog.open();\n    dialog.setModal(true);\n  }\n\n  read(iframe, input) {\n    ['src', 'width', 'height', 'title'].forEach(key => {\n      input[key].value = iframe.getAttribute(key) || '';\n    });\n  }\n\n  write(iframe, wrapper, input) {\n    ['src', 'width', 'height', 'title'].forEach(key => {\n      if (input[key].value) {\n        iframe.setAttribute(key, input[key].value);\n        wrapper.style[key] = input[key].value;\n      } else {\n        iframe.removeAttribute(key);\n        wrapper.style[key] = '';\n      }\n    });\n\n    ['width', 'height'].forEach(key => {\n      if (input[key].value) {\n        wrapper.style[key] = input[key].value;\n      } else {\n        wrapper.style[key] = '';\n      }\n    });\n  }\n}\n","export default {\n  en: {\n    iframePropsProperties: 'Iframe properties'\n  },\n  ja: {\n    iframePropsProperties: 'インラインフレームのプロパティ'\n  }\n};\n","import Jodit from './jodit.js';\nimport Plugin from './plugin.js';\nimport lang from './lang.js';\nimport './index.scss';\n\nObject.keys(lang).forEach(locale => {\n  Jodit.lang[locale] = {\n    ...Jodit.lang[locale],\n    ...lang[locale]\n  }\n});\n\nJodit.plugins.add('iframe-props', Plugin);\n\nexport default Plugin;\n"],"names":["Jodit","module","Plugin","init","jodit","this","onDblClickFunc","onDblClick","bind","events","on","destruct","off","event","target","tagName","iframe","querySelector","showDialog","preventDefault","wrapper","dialog","dlg","closeOnClickOverlay","closeOnEsc","buttons","UIForm","UIInput","Button","modules","form","container","classList","add","input","src","name","label","required","width","i18n","height","title","append","Object","values","read","button","cancel","apply","onAction","validate","write","synchronizeValues","close","setHeader","setContent","setFooter","setSize","open","setModal","forEach","key","value","getAttribute","setAttribute","style","removeAttribute","lang","en","iframePropsProperties","ja","keys","locale","plugins"],"mappings":"oUAEAA,EAAeC,EAAOD,OAASC,ECAhB,MAAAC,EACbC,IAAAA,CAAKC,GACHC,KAAKD,MAAQA,EAEbC,KAAKC,eAAiBD,KAAKE,WAAWC,KAAKH,MAC3CD,EAAMK,OAAOC,GAAG,WAAYL,KAAKC,eACnC,CAEAK,QAAAA,GACEN,KAAKD,MAAMK,OAAOG,IAAI,WAAYP,KAAKC,eACzC,CAEAC,UAAAA,CAAWM,GACT,GAA6B,UAAzBA,EAAMC,OAAOC,QAAqB,CACpC,MAAMC,EAASH,EAAMC,OAAOG,cAAc,UACtCD,IACFX,KAAKa,WAAWF,EAAQH,EAAMC,QAC9BD,EAAMM,iBAEV,CACF,CAEAD,UAAAA,CAAWF,EAAQI,GACjB,MAAMC,EAAShB,KAAKD,MAAMkB,IAAI,CAC5BC,qBAAqB,EACrBC,YAAY,EACZC,QAAS,CAAC,WAAY,mBAGlBC,OAAEA,EAAMC,QAAEA,EAAOC,OAAEA,GAAW5B,EAAM6B,QAEpCC,EAAO,IAAIJ,EAAOrB,KAAKD,OAC7B0B,EAAKC,UAAUC,UAAUC,IAAI,oCAE7B,MAAMC,EAAQ,CACZC,IAAK,IAAIR,EAAQtB,KAAKD,MAAO,CAC3BgC,KAAM,MACNC,MAAO,MACPC,UAAU,IAEZC,MAAO,IAAIZ,EAAQtB,KAAKD,MAAO,CAC7BgC,KAAM,QACNC,MAAOhC,KAAKD,MAAMoC,KAAK,WAEzBC,OAAQ,IAAId,EAAQtB,KAAKD,MAAO,CAC9BgC,KAAM,SACNC,MAAOhC,KAAKD,MAAMoC,KAAK,YAEzBE,MAAO,IAAIf,EAAQtB,KAAKD,MAAO,CAC7BgC,KAAM,QACNC,MAAOhC,KAAKD,MAAMoC,KAAK,YAI3BV,EAAKa,OAAOC,OAAOC,OAAOX,IAE1B7B,KAAKyC,KAAK9B,EAAQkB,GAElB,MAAMa,EAAS,CACbC,OAAQ,IAAIpB,EAAOvB,KAAKD,MAAO,SAAU,UACzC6C,MAAO,IAAIrB,EAAOvB,KAAKD,MAAO,KAAM,QAAS,YAG/C2C,EAAOE,MAAMC,SAAS,KAChBpB,EAAKqB,aACP9C,KAAK+C,MAAMpC,EAAQI,EAASc,GAC5B7B,KAAKD,MAAMiD,oBACXhC,EAAOiC,WAIXP,EAAOC,OAAOE,SAAS,KACrB7B,EAAOiC,UAGTjC,EAAOkC,UAAUlD,KAAKD,MAAMoC,KAAK,0BACjCnB,EAAOmC,WAAW1B,GAClBT,EAAOoC,UAAUb,OAAOC,OAAOE,IAC/B1B,EAAOqC,QAAQ,IAAK,KAEpBrC,EAAOsC,OACPtC,EAAOuC,UAAS,EAClB,CAEAd,IAAAA,CAAK9B,EAAQkB,GACX,CAAC,MAAO,QAAS,SAAU,SAAS2B,QAAQC,IAC1C5B,EAAM4B,GAAKC,MAAQ/C,EAAOgD,aAAaF,IAAQ,IAEnD,CAEAV,KAAAA,CAAMpC,EAAQI,EAASc,GACrB,CAAC,MAAO,QAAS,SAAU,SAAS2B,QAAQC,IACtC5B,EAAM4B,GAAKC,OACb/C,EAAOiD,aAAaH,EAAK5B,EAAM4B,GAAKC,OACpC3C,EAAQ8C,MAAMJ,GAAO5B,EAAM4B,GAAKC,QAEhC/C,EAAOmD,gBAAgBL,GACvB1C,EAAQ8C,MAAMJ,GAAO,MAIzB,CAAC,QAAS,UAAUD,QAAQC,IACtB5B,EAAM4B,GAAKC,MACb3C,EAAQ8C,MAAMJ,GAAO5B,EAAM4B,GAAKC,MAEhC3C,EAAQ8C,MAAMJ,GAAO,IAG3B,EC9GF,IAAeM,EAAA,CACbC,GAAI,CACFC,sBAAuB,qBAEzBC,GAAI,CACFD,sBAAuB,oBCA3B1B,OAAO4B,KAAKJ,GAAMP,QAAQY,IACxBzE,EAAMoE,KAAKK,GAAU,IAChBzE,EAAMoE,KAAKK,MACXL,EAAKK,MAIZzE,EAAM0E,QAAQzC,IAAI,eAAgB/B"}