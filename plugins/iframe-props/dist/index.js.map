{"version":3,"file":"index.js","sources":["../src/plugin.js","../src/lang.js","../src/index.js"],"sourcesContent":["import { Jodit } from 'jodit';\n\nexport default class {\n  init(jodit) {\n    this.jodit = jodit;\n\n    this.onDblClickFunc = this.onDblClick.bind(this);\n    jodit.events.on('dblclick', this.onDblClickFunc);\n  }\n\n  destruct() {\n    this.jodit.events.off('dblclick', this.onDblClickFunc);\n  }\n\n  onDblClick(event) {\n    if (event.target.tagName === 'JODIT') {\n      const iframe = event.target.querySelector('iframe');\n      if (iframe) {\n        this.showDialog(iframe, event.target);\n        event.preventDefault();\n      }\n    }\n  }\n\n  showDialog(iframe, wrapper) {\n    const dialog = this.jodit.dlg({\n      closeOnClickOverlay: true,\n      closeOnEsc: true,\n      buttons: ['fullsize', 'dialog.close']\n    });\n\n    const { UIForm, UIInput, Button } = Jodit.modules;\n\n    const form = new UIForm(this.jodit);\n    form.container.classList.add('jodit-ui-form__iframe-properties');\n\n    const input = {\n      src: new UIInput(this.jodit, {\n        name: 'src',\n        label: 'URL',\n        required: true\n      }),\n      width: new UIInput(this.jodit, {\n        name: 'width',\n        label: this.jodit.i18n('iframePropsWidth')\n      }),\n      height: new UIInput(this.jodit, {\n        name: 'height',\n        label: this.jodit.i18n('iframePropsHeight')\n      }),\n      title: new UIInput(this.jodit, {\n        name: 'title',\n        label: this.jodit.i18n('iframePropsTitle')\n      })\n    };\n\n    form.append(Object.values(input));\n\n    this.read(iframe, input);\n\n    const button = {\n      cancel: new Button(this.jodit, 'cancel', 'Cancel'),\n      apply: new Button(this.jodit, 'ok', 'Apply', 'primary')\n    };\n\n    button.apply.onAction(() => {\n      if (form.validate()) {\n        this.write(iframe, wrapper, input);\n        this.jodit.synchronizeValues();\n        dialog.close();\n      }\n    });\n\n    button.cancel.onAction(() => {\n      dialog.close();\n    });\n\n    dialog.setHeader(this.jodit.i18n('iframePropsProperties'));\n    dialog.setContent(form);\n    dialog.setFooter(Object.values(button));\n    dialog.setSize(500, 400);\n\n    dialog.open();\n    dialog.setModal(true);\n  }\n\n  read(iframe, input) {\n    ['src', 'width', 'height', 'title'].forEach(key => {\n      input[key].value = iframe.getAttribute(key) || '';\n    });\n  }\n\n  write(iframe, wrapper, input) {\n    ['src', 'width', 'height', 'title'].forEach(key => {\n      if (input[key].value) {\n        iframe.setAttribute(key, input[key].value);\n        wrapper.style[key] = input[key].value;\n      } else {\n        iframe.removeAttribute(key);\n        wrapper.style[key] = '';\n      }\n    });\n\n    ['width', 'height'].forEach(key => {\n      if (input[key].value) {\n        wrapper.style[key] = input[key].value;\n      } else {\n        wrapper.style[key] = '';\n      }\n    });\n  }\n}\n","export default {\n  en: {\n    iframePropsProperties: 'Iframe properties',\n    iframePropsWidth: 'Width',\n    iframePropsHeight: 'Height',\n    iframePropsTitle: 'Title'\n  },\n  ja: {\n    iframePropsProperties: 'インラインフレームのプロパティ',\n    iframePropsWidth: '幅',\n    iframePropsHeight: '高さ',\n    iframePropsTitle: 'タイトル'\n  }\n};\n","import { Jodit } from 'jodit';\nimport Plugin from './plugin.js';\nimport lang from './lang.js';\nimport './index.scss';\n\nObject.keys(lang).forEach(locale => {\n  Jodit.lang[locale] = {\n    ...Jodit.lang[locale],\n    ...lang[locale]\n  }\n});\n\nJodit.plugins.add('iframe-props', Plugin);\n\nexport default Plugin;\n"],"names":["Plugin","init","jodit","this","onDblClickFunc","onDblClick","bind","events","on","destruct","off","event","target","tagName","iframe","querySelector","showDialog","preventDefault","wrapper","dialog","dlg","closeOnClickOverlay","closeOnEsc","buttons","UIForm","UIInput","Button","Jodit","modules","form","container","classList","add","input","src","name","label","required","width","i18n","height","title","append","Object","values","read","button","cancel","apply","onAction","validate","write","synchronizeValues","close","setHeader","setContent","setFooter","setSize","open","setModal","forEach","key","value","getAttribute","setAttribute","style","removeAttribute","lang","en","iframePropsProperties","iframePropsWidth","iframePropsHeight","iframePropsTitle","ja","keys","locale","plugins"],"mappings":"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"}