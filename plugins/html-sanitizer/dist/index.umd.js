!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("jodit")):"function"==typeof define&&define.amd?define(["jodit"],t):(e="undefined"!=typeof globalThis?globalThis:e||self).JoditPluginHtmlSanitizer=t(e.Jodit)}(this,function(e){"use strict";function t(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach(function(i){if("default"!==i){var n=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(t,i,n.get?n:{enumerable:!0,get:function(){return e[i]}})}}),t.default=e,Object.freeze(t)}var i=t(e),n=i.Jodit||i;class s{init(e){this.jodit=e,this.sanitizeFunc=this.sanitize.bind(this),this.sanitizePasteFunc=this.sanitizePaste.bind(this),e.events.on("change",this.sanitizeFunc),e.events.on("processPaste",this.sanitizePasteFunc)}destruct(){this.jodit.events.off("change",this.sanitizeFunc),this.jodit.events.off("processPaste",this.sanitizePasteFunc)}sanitize(){this.removeUnsafeAttributes(this.jodit.editor)&&this.jodit.synchronizeValues()}sanitizePaste(e,t,i){const n=document.createElement("div");n.innerHTML=t;return this.removeUnsafeAttributes(n)?n.innerHTML:t}removeUnsafeAttributes(e){let t=!1;return e.querySelectorAll("*").forEach(e=>{[...e.attributes].forEach(i=>{i.name.match(/^(href|src|action)$/i)&&i.value.match(/^javascript:/i)&&(e.removeAttribute(i.name),t=!0),i.name.match(/^on/i)&&(e.removeAttribute(i.name),t=!0)})}),t}}return n.plugins.add("html-sanitizer",s),s});
//# sourceMappingURL=index.umd.js.map
