{"version":3,"file":"index.umd.js","sources":["../src/jodit.js","../src/plugin.js","../src/lang.js","../src/index.js"],"sourcesContent":["import * as module from 'jodit';\n\nexport default module.Jodit || module;\n","import icon from './images/icon.svg';\n\nexport default class AnchorPlugin {\n  init(jodit) {\n    this.jodit = jodit;\n\n    jodit.options.controls.anchor = {\n      name: 'anchor',\n      icon: icon,\n      tooltip: jodit.i18n('anchorSetAnchor'),\n      popup: this.popup.bind(this),\n      isActive: this.isActive.bind(this)\n    };\n  }\n\n  popupHTML() {\n    return `\n      <form class=\"jodit-ui-form\">\n        <div class=\"jodit-ui-input\">\n          <span class=\"jodit-ui-input__label\">${this.jodit.i18n('anchorAnchorID')}</span>\n          <div class=\"jodit-ui-input__wrapper\">\n            <input type=\"text\" class=\"jodit-ui-input__input\" style=\"width: 150px;\">\n          </div>\n        </div>\n        <div class=\"jodit-ui-block\">\n          <button class=\"jodit-ui-button jodit-ui-button_variant_primary\">${this.jodit.i18n('anchorSet')}</button>\n        </div>\n      </form>\n    `;\n  }\n\n  popup(jodit, current, close) {\n    const wrapper = jodit.createInside.fromHTML(this.popupHTML());\n    const input = wrapper.querySelector('input');\n    const button = wrapper.querySelector('button');\n    const target = this.currentElement();\n\n    if (target && target.id) {\n      input.value = target.id;\n    }\n\n    input.addEventListener('keydown', event => {\n      if (event.key === 'Enter') {\n        button.click();\n      }\n    });\n\n    button.addEventListener('click', event => {\n      if (target) {\n        const id = input.value.trim();\n        if (id) {\n          target.setAttribute('id', id);\n        } else {\n          target.removeAttribute('id');\n        }\n        jodit.synchronizeValues();\n      }\n      close();\n    });\n\n    return wrapper;\n  }\n\n  isActive(jodit) {\n    const elem = this.currentElement();\n    return elem && elem.hasAttribute('id');\n  }\n\n  currentElement() {\n    const current = this.findCurrentElement();\n    if (current === this.jodit.editor) return null;\n    return current;\n  }\n\n  findCurrentElement() {\n    const node = this.jodit.selection.current();\n    if (!node) return null;\n\n    if (node.nodeType === Node.TEXT_NODE) {\n      if (node.textContent === '\\uFEFF' && node.previousElementSibling?.matches('jodit-media')) {\n        return node.previousElementSibling.querySelector('video') || node.previousElementSibling.querySelector('audio');\n      } else {\n        return node.parentElement;\n      }\n    } else if (node.matches('jodit')) {\n      return node.querySelector('iframe');\n    }\n    return node;\n  }\n}\n","export default {\n  en: {\n    anchorSetAnchor: 'Set anchor ID',\n    anchorAnchorID: 'Anchor ID',\n    anchorSet: 'Set'\n  },\n  ja: {\n    anchorSetAnchor: 'アンカーIDを設定',\n    anchorAnchorID: 'アンカーID',\n    anchorSet: '設定'\n  }\n};\n","import Jodit from './jodit.js';\nimport Plugin from './plugin.js';\nimport lang from './lang.js';\nimport './index.scss';\n\nObject.keys(lang).forEach(locale => {\n  Jodit.lang[locale] = {\n    ...Jodit.lang[locale],\n    ...lang[locale]\n  }\n});\n\nJodit.plugins.add('anchor', Plugin);\n\nexport default Plugin;\n"],"names":["Jodit","module","AnchorPlugin","init","jodit","this","options","controls","anchor","name","icon","tooltip","i18n","popup","bind","isActive","popupHTML","current","close","wrapper","createInside","fromHTML","input","querySelector","button","target","currentElement","id","value","addEventListener","event","key","click","trim","setAttribute","removeAttribute","synchronizeValues","elem","hasAttribute","findCurrentElement","editor","node","selection","nodeType","Node","TEXT_NODE","textContent","previousElementSibling","matches","parentElement","lang","en","anchorSetAnchor","anchorAnchorID","anchorSet","ja","Object","keys","forEach","locale","plugins","add","Plugin"],"mappings":"2jBAEAA,EAAeC,EAAOD,OAASC,ECAhB,MAAMC,EACnBC,IAAAA,CAAKC,GACHC,KAAKD,MAAQA,EAEbA,EAAME,QAAQC,SAASC,OAAS,CAC9BC,KAAM,SACNC,moBACAC,QAASP,EAAMQ,KAAK,mBACpBC,MAAOR,KAAKQ,MAAMC,KAAKT,MACvBU,SAAUV,KAAKU,SAASD,KAAKT,MAEjC,CAEAW,SAAAA,GACE,MAAO,6HAGqCX,KAAKD,MAAMQ,KAAK,qTAMYP,KAAKD,MAAMQ,KAAK,4DAI1F,CAEAC,KAAAA,CAAMT,EAAOa,EAASC,GACpB,MAAMC,EAAUf,EAAMgB,aAAaC,SAAShB,KAAKW,aAC3CM,EAAQH,EAAQI,cAAc,SAC9BC,EAASL,EAAQI,cAAc,UAC/BE,EAASpB,KAAKqB,iBAyBpB,OAvBID,GAAUA,EAAOE,KACnBL,EAAMM,MAAQH,EAAOE,IAGvBL,EAAMO,iBAAiB,UAAWC,IACd,UAAdA,EAAMC,KACRP,EAAOQ,UAIXR,EAAOK,iBAAiB,QAASC,IAC/B,GAAIL,EAAQ,CACV,MAAME,EAAKL,EAAMM,MAAMK,OACnBN,EACFF,EAAOS,aAAa,KAAMP,GAE1BF,EAAOU,gBAAgB,MAEzB/B,EAAMgC,mBACR,CACAlB,MAGKC,CACT,CAEAJ,QAAAA,CAASX,GACP,MAAMiC,EAAOhC,KAAKqB,iBAClB,OAAOW,GAAQA,EAAKC,aAAa,KACnC,CAEAZ,cAAAA,GACE,MAAMT,EAAUZ,KAAKkC,qBACrB,OAAItB,IAAYZ,KAAKD,MAAMoC,OAAe,KACnCvB,CACT,CAEAsB,kBAAAA,GACE,MAAME,EAAOpC,KAAKD,MAAMsC,UAAUzB,UAClC,OAAKwB,EAEDA,EAAKE,WAAaC,KAAKC,UACA,WAArBJ,EAAKK,aAA4BL,EAAKM,wBAAwBC,QAAQ,eACjEP,EAAKM,uBAAuBxB,cAAc,UAAYkB,EAAKM,uBAAuBxB,cAAc,SAEhGkB,EAAKQ,cAELR,EAAKO,QAAQ,SACfP,EAAKlB,cAAc,UAErBkB,EAXW,IAYpB,ECxFa,IAAAS,EAAA,CACbC,GAAI,CACFC,gBAAiB,gBACjBC,eAAgB,YAChBC,UAAW,OAEbC,GAAI,CACFH,gBAAiB,YACjBC,eAAgB,SAChBC,UAAW,cCJfE,OAAOC,KAAKP,GAAMQ,QAAQC,IACxB3D,EAAMkD,KAAKS,GAAU,IAChB3D,EAAMkD,KAAKS,MACXT,EAAKS,MAIZ3D,EAAM4D,QAAQC,IAAI,SAAUC"}