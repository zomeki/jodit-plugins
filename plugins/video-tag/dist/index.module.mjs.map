{"version":3,"file":"index.module.mjs","sources":["../src/plugin.js","../src/lang.js","../src/index.js"],"sourcesContent":["import icon from './images/icon.svg';\n\nexport default class {\n  init(jodit) {\n    this.jodit = jodit;\n\n    jodit.options.controls.videoTag = {\n      name: 'videoTag',\n      icon: icon,\n      tooltip: jodit.i18n('videoTagInsertVideo'),\n      popup: this.popup.bind(this)\n    };\n  }\n\n  popupHTML() {\n    return `\n      <form class=\"jodit-ui-form\">\n        <div class=\"jodit-ui-input\">\n          <span class=\"jodit-ui-input__label\">URL</span>\n          <div class=\"jodit-ui-input__wrapper\">\n            <input type=\"text\" placeholder=\"https://\" class=\"jodit-ui-input__input\" style=\"width: 150px;\">\n          </div>\n        </div>\n        <div class=\"jodit-ui-block\">\n          <button class=\"jodit-ui-button jodit-ui-button_variant_primary\">${this.jodit.i18n('Insert')}</button>\n        </div>\n      </form>\n    `;\n  }\n\n  popup(jodit, current, close) {\n    const wrapper = jodit.createInside.fromHTML(this.popupHTML());\n    const input = wrapper.querySelector('input');\n    const button = wrapper.querySelector('button');\n\n    input.addEventListener('keydown', event => {\n      if (event.key === 'Enter') {\n        button.click();\n      }\n    });\n\n    jodit.selection.save();\n\n    button.addEventListener('click', event => {\n      if (input.value) {\n        const html = this.buildHTML(input.value);\n        jodit.selection.restore();\n        jodit.selection.insertHTML(html);\n      }\n      close();\n    });\n\n    return wrapper;\n  }\n\n  buildHTML(url) {\n    const width = this.jodit.options.video.defaultWidth;\n    const height = this.jodit.options.video.defaultHeight;\n    const html = this.jodit.options.video.parseUrlToVideoEmbed(url, { width: width, height: height });\n    if (html !== url) return html;\n    return `<video controls src=\"${url}\" width=\"${width}\" height=\"${height}\"></video>`;\n  }\n}\n","export default {\n  en: {\n    videoTagInsertVideo: 'Insert video'\n  },\n  ja: {\n    videoTagInsertVideo: '動画を挿入'\n  }\n};\n","import { Jodit } from 'jodit';\nimport Plugin from './plugin.js';\nimport lang from './lang.js';\n\nObject.keys(lang).forEach(locale => {\n  Jodit.lang[locale] = {\n    ...Jodit.lang[locale],\n    ...lang[locale]\n  }\n});\n\nJodit.plugins.add('video-tag', Plugin);\n\nexport default Plugin;\n"],"names":["Plugin","init","jodit","this","options","controls","videoTag","name","icon","tooltip","i18n","popup","bind","popupHTML","current","close","wrapper","createInside","fromHTML","input","querySelector","button","addEventListener","event","key","click","selection","save","value","html","buildHTML","restore","insertHTML","url","width","video","defaultWidth","height","defaultHeight","parseUrlToVideoEmbed","lang","en","videoTagInsertVideo","ja","Object","keys","forEach","locale","Jodit","plugins","add"],"mappings":"8BAEe,MAAAA,EACbC,IAAAA,CAAKC,GACHC,KAAKD,MAAQA,EAEbA,EAAME,QAAQC,SAASC,SAAW,CAChCC,KAAM,WACNC,wjBACAC,QAASP,EAAMQ,KAAK,uBACpBC,MAAOR,KAAKQ,MAAMC,KAAKT,MAE3B,CAEAU,SAAAA,GACE,MAAO,wbASiEV,KAAKD,MAAMQ,KAAK,yDAI1F,CAEAC,KAAAA,CAAMT,EAAOY,EAASC,GACpB,MAAMC,EAAUd,EAAMe,aAAaC,SAASf,KAAKU,aAC3CM,EAAQH,EAAQI,cAAc,SAC9BC,EAASL,EAAQI,cAAc,UAmBrC,OAjBAD,EAAMG,iBAAiB,UAAWC,IACd,UAAdA,EAAMC,KACRH,EAAOI,UAIXvB,EAAMwB,UAAUC,OAEhBN,EAAOC,iBAAiB,QAASC,IAC/B,GAAIJ,EAAMS,MAAO,CACf,MAAMC,EAAO1B,KAAK2B,UAAUX,EAAMS,OAClC1B,EAAMwB,UAAUK,UAChB7B,EAAMwB,UAAUM,WAAWH,EAC7B,CACAd,MAGKC,CACT,CAEAc,SAAAA,CAAUG,GACR,MAAMC,EAAQ/B,KAAKD,MAAME,QAAQ+B,MAAMC,aACjCC,EAASlC,KAAKD,MAAME,QAAQ+B,MAAMG,cAClCT,EAAO1B,KAAKD,MAAME,QAAQ+B,MAAMI,qBAAqBN,EAAK,CAAEC,MAAOA,EAAOG,OAAQA,IACxF,OAAIR,IAASI,EAAYJ,EAClB,wBAAwBI,aAAeC,cAAkBG,aAClE,EC7DF,IAAeG,EAAA,CACbC,GAAI,CACFC,oBAAqB,gBAEvBC,GAAI,CACFD,oBAAqB,UCDzBE,OAAOC,KAAKL,GAAMM,QAAQC,IACxBC,EAAMR,KAAKO,GAAU,IAChBC,EAAMR,KAAKO,MACXP,EAAKO,MAIZC,EAAMC,QAAQC,IAAI,YAAalD"}