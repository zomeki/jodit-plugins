{"version":3,"file":"index.umd.js","sources":["../src/jodit.js","../src/plugin.js","../src/lang.js","../src/index.js"],"sourcesContent":["import * as module from 'jodit';\n\nexport default module.Jodit || module;\n","import Jodit from './jodit.js';\nimport icon from './images/icon.svg';\n\nexport default class {\n  init(jodit) {\n    this.jodit = jodit;\n\n    jodit.options.controls.videoTag = {\n      name: 'videoTag',\n      icon: icon,\n      tooltip: jodit.i18n('videoTagInsertVideo'),\n      popup: this.popup.bind(this)\n    };\n  }\n\n  popup(jodit, current, close) {\n    const { UIForm, UIInput, Button } = Jodit.modules;\n\n    const form = new UIForm(this.jodit);\n\n    const input = new UIInput(this.jodit, {\n      name: 'url',\n      label: 'URL',\n      required: true,\n      placeholder: 'https://'\n    });\n\n    const button = new Button(this.jodit, 'ok', 'Insert', 'primary');\n\n    form.append(input);\n    form.append(button);\n\n    jodit.selection.save();\n\n    button.onAction(() => {\n      if (form.validate()) {\n        const html = this.buildHTML(input.value);\n        jodit.selection.restore();\n        jodit.selection.insertHTML(html);\n        close();\n      }\n    });\n\n    input.container.addEventListener('keydown', event => {\n      if (event.key === 'Enter') {\n        button.button.click();\n        event.preventDefault();\n      }\n    });\n\n    return form;\n  }\n\n  buildHTML(url) {\n    const width = this.jodit.options.video.defaultWidth;\n    const height = this.jodit.options.video.defaultHeight;\n    const html = this.jodit.options.video.parseUrlToVideoEmbed(url, { width: width, height: height });\n    if (html !== url) return html;\n    return `<video controls src=\"${url}\" width=\"${width}\" height=\"${height}\"></video>`;\n  }\n}\n","export default {\n  en: {\n    videoTagInsertVideo: 'Insert video'\n  },\n  ja: {\n    videoTagInsertVideo: '動画を挿入'\n  }\n};\n","import Jodit from './jodit.js';\nimport Plugin from './plugin.js';\nimport lang from './lang.js';\n\nObject.keys(lang).forEach(locale => {\n  Jodit.lang[locale] = {\n    ...Jodit.lang[locale],\n    ...lang[locale]\n  }\n});\n\nJodit.plugins.add('video-tag', Plugin);\n\nexport default Plugin;\n"],"names":["Jodit","module","Plugin","init","jodit","this","options","controls","videoTag","name","icon","tooltip","i18n","popup","bind","current","close","UIForm","UIInput","Button","modules","form","input","label","required","placeholder","button","append","selection","save","onAction","validate","html","buildHTML","value","restore","insertHTML","container","addEventListener","event","key","click","preventDefault","url","width","video","defaultWidth","height","defaultHeight","parseUrlToVideoEmbed","lang","en","videoTagInsertVideo","ja","Object","keys","forEach","locale","plugins","add"],"mappings":"6jBAEAA,EAAeC,EAAOD,OAASC,ECChB,MAAAC,EACbC,IAAAA,CAAKC,GACHC,KAAKD,MAAQA,EAEbA,EAAME,QAAQC,SAASC,SAAW,CAChCC,KAAM,WACNC,wjBACAC,QAASP,EAAMQ,KAAK,uBACpBC,MAAOR,KAAKQ,MAAMC,KAAKT,MAE3B,CAEAQ,KAAAA,CAAMT,EAAOW,EAASC,GACpB,MAAMC,OAAEA,EAAMC,QAAEA,EAAOC,OAAEA,GAAWnB,EAAMoB,QAEpCC,EAAO,IAAIJ,EAAOZ,KAAKD,OAEvBkB,EAAQ,IAAIJ,EAAQb,KAAKD,MAAO,CACpCK,KAAM,MACNc,MAAO,MACPC,UAAU,EACVC,YAAa,aAGTC,EAAS,IAAIP,EAAOd,KAAKD,MAAO,KAAM,SAAU,WAuBtD,OArBAiB,EAAKM,OAAOL,GACZD,EAAKM,OAAOD,GAEZtB,EAAMwB,UAAUC,OAEhBH,EAAOI,SAAS,KACd,GAAIT,EAAKU,WAAY,CACnB,MAAMC,EAAO3B,KAAK4B,UAAUX,EAAMY,OAClC9B,EAAMwB,UAAUO,UAChB/B,EAAMwB,UAAUQ,WAAWJ,GAC3BhB,GACF,IAGFM,EAAMe,UAAUC,iBAAiB,UAAWC,IACxB,UAAdA,EAAMC,MACRd,EAAOA,OAAOe,QACdF,EAAMG,oBAIHrB,CACT,CAEAY,SAAAA,CAAUU,GACR,MAAMC,EAAQvC,KAAKD,MAAME,QAAQuC,MAAMC,aACjCC,EAAS1C,KAAKD,MAAME,QAAQuC,MAAMG,cAClChB,EAAO3B,KAAKD,MAAME,QAAQuC,MAAMI,qBAAqBN,EAAK,CAAEC,MAAOA,EAAOG,OAAQA,IACxF,OAAIf,IAASW,EAAYX,EAClB,wBAAwBW,aAAeC,cAAkBG,aAClE,EC3Da,IAAAG,EAAA,CACbC,GAAI,CACFC,oBAAqB,gBAEvBC,GAAI,CACFD,oBAAqB,iBCDzBE,OAAOC,KAAKL,GAAMM,QAAQC,IACxBzD,EAAMkD,KAAKO,GAAU,IAChBzD,EAAMkD,KAAKO,MACXP,EAAKO,MAIZzD,EAAM0D,QAAQC,IAAI,YAAazD"}