"use strict";var t=require("jodit");var e={en:{anchorSetAnchor:"Set anchor ID",anchorAnchorID:"Anchor ID",anchorSet:"Set"},ja:{anchorSetAnchor:"アンカーIDを設定",anchorAnchorID:"アンカーID",anchorSet:"設定"}};Object.keys(e).forEach(i=>{t.Jodit.lang[i]={...t.Jodit.lang[i],...e[i]}}),t.Jodit.plugins.add("anchor",class{init(t){this.jodit=t,t.options.controls.anchor={name:"anchor",icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640">\x3c!--!Font Awesome Free v7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--\x3e<path d="M160 96C160 78.3 145.7 64 128 64C110.3 64 96 78.3 96 96L96 544C96 561.7 110.3 576 128 576C145.7 576 160 561.7 160 544L160 422.4L222.7 403.6C264.6 391 309.8 394.9 348.9 414.5C391.6 435.9 441.4 438.5 486.1 421.7L523.2 407.8C535.7 403.1 544 391.2 544 377.8L544 130.1C544 107.1 519.8 92.1 499.2 102.4L487.4 108.3C442.5 130.8 389.6 130.8 344.6 108.3C308.2 90.1 266.3 86.5 227.4 98.2L160 118.4L160 96z"/></svg>\n',tooltip:t.i18n("anchorSetAnchor"),popup:this.popup.bind(this),isActive:this.isActive.bind(this)}}popupHTML(){return`\n      <form class="jodit-ui-form">\n        <div class="jodit-ui-input">\n          <span class="jodit-ui-input__label">${this.jodit.i18n("anchorAnchorID")}</span>\n          <div class="jodit-ui-input__wrapper">\n            <input type="text" class="jodit-ui-input__input" style="width: 150px;">\n          </div>\n        </div>\n        <div class="jodit-ui-block">\n          <button class="jodit-ui-button jodit-ui-button_variant_primary">${this.jodit.i18n("anchorSet")}</button>\n        </div>\n      </form>\n    `}popup(t,e,i){const o=t.createInside.fromHTML(this.popupHTML()),s=o.querySelector("input"),n=o.querySelector("button"),a=this.currentElement();return a&&a.id&&(s.value=a.id),s.addEventListener("keydown",t=>{"Enter"===t.key&&n.click()}),n.addEventListener("click",e=>{if(a){const e=s.value.trim();e?a.setAttribute("id",e):a.removeAttribute("id"),t.synchronizeValues()}i()}),o}isActive(t){const e=this.currentElement();return e&&e.hasAttribute("id")}currentElement(){const t=this.findCurrentElement();return t===this.jodit.editor?null:t}findCurrentElement(){const t=this.jodit.selection.current();return t?t.nodeType===Node.TEXT_NODE?"\ufeff"===t.textContent&&t.previousElementSibling?.matches("jodit-media")?t.previousElementSibling.querySelector("video")||t.previousElementSibling.querySelector("audio"):t.parentElement:t.matches("jodit")?t.querySelector("iframe"):t:null}});var i={en:{audioPropsProperties:"Audio properties"},ja:{audioPropsProperties:"音声のプロパティ"}};Object.keys(i).forEach(e=>{t.Jodit.lang[e]={...t.Jodit.lang[e],...i[e]}}),t.Jodit.plugins.add("audio-props",class{init(t){this.jodit=t,this.onDblClickFunc=this.onDblClick.bind(this),this.jodit.events.on("dblclick",this.onDblClickFunc)}destruct(){this.jodit.events.off("dblclick",this.onDblClickFunc)}onDblClick(t){if("JODIT-MEDIA"===t.target.tagName){const e=t.target.querySelector("audio");e&&(this.showDialog(e,t.target),t.preventDefault())}}showDialog(e,i){const o=this.jodit.dlg({closeOnClickOverlay:!0,closeOnEsc:!0,buttons:["fullsize","dialog.close"]}),{UIForm:s,UIInput:n,Button:a}=t.Jodit.modules,r=new s(this.jodit);r.container.classList.add("jodit-ui-form__audio-properties");const l={src:new n(this.jodit,{name:"src",label:"URL",required:!0})};r.append(Object.values(l)),this.read(e,l);const c={cancel:new a(this.jodit,"cancel","Cancel"),apply:new a(this.jodit,"ok","Apply","primary")};c.apply.onAction(()=>{r.validate()&&(this.write(e,l),this.jodit.synchronizeValues(),o.close())}),c.cancel.onAction(()=>{o.close()}),o.setHeader(this.jodit.i18n("audioPropsProperties")),o.setContent(r),o.setFooter(Object.values(c)),o.setSize(500,400),o.open(),o.setModal(!0)}read(t,e){e.src.value=t.src||""}write(t,e){t.src=e.src.value}});var o={en:{audioTagInsertAudio:"Insert audio"},ja:{audioTagInsertAudio:"音声を挿入"}};Object.keys(o).forEach(e=>{t.Jodit.lang[e]={...t.Jodit.lang[e],...o[e]}}),t.Jodit.plugins.add("audio-tag",class{init(t){this.jodit=t,t.options.controls.audioTag={name:"audioTag",icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640">\x3c!--!Font Awesome Free v7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--\x3e<path d="M144 416L192 416L326.1 535.2C332.5 540.9 340.7 544 349.2 544C368.4 544 384 528.4 384 509.2L384 130.8C384 111.6 368.4 96 349.2 96C340.7 96 332.5 99.1 326.1 104.8L192 224L144 224C117.5 224 96 245.5 96 272L96 368C96 394.5 117.5 416 144 416zM476.6 245.5C466.3 237.1 451.2 238.7 442.8 249C434.4 259.3 436 274.4 446.3 282.8C457.1 291.6 464 305 464 320C464 335 457.1 348.4 446.3 357.3C436 365.7 434.5 380.8 442.8 391.1C451.1 401.4 466.3 402.9 476.6 394.6C498.1 376.9 512 350.1 512 320C512 289.9 498.1 263.1 476.5 245.5z"/></svg>\n',tooltip:t.i18n("audioTagInsertAudio"),popup:this.popup.bind(this)}}popupHTML(){return`\n      <form class="jodit-ui-form">\n        <div class="jodit-ui-input">\n          <span class="jodit-ui-input__label">URL</span>\n          <div class="jodit-ui-input__wrapper">\n            <input type="text" placeholder="https://" class="jodit-ui-input__input" style="width: 150px;">\n          </div>\n        </div>\n        <div class="jodit-ui-block">\n          <button class="jodit-ui-button jodit-ui-button_variant_primary">${this.jodit.i18n("Insert")}</button>\n        </div>\n      </form>\n    `}popup(t,e,i){const o=t.createInside.fromHTML(this.popupHTML()),s=o.querySelector("input"),n=o.querySelector("button");return s.addEventListener("keydown",t=>{"Enter"===t.key&&n.click()}),t.selection.save(),n.addEventListener("click",e=>{if(s.value){const e=this.buildHTML(s.value);t.selection.restore(),t.selection.insertHTML(e)}i()}),o}buildHTML(t){return`<audio controls src="${t}"></audio>`}});const s=t.Jodit.constants.globalDocument,n=t.Jodit.modules.Dom,{toArray:a,trim:r}=t.Jodit.modules.Helpers;function l(t){-1!==t.indexOf("<html ")&&(t=(t=t.substring(t.indexOf("<html "),t.length)).substring(0,t.lastIndexOf("</html>")+7));let e="";try{const i=s.createElement("div");i.innerHTML=t;const o=[];i.firstChild&&n.each(i,t=>{if(t)switch(t.nodeType){case Node.ELEMENT_NODE:switch(t.nodeName){case"STYLE":case"LINK":case"META":o.push(t);break;case"W:SDT":case"W:SDTPR":case"FONT":n.unwrap(t);break;default:a(t.attributes).forEach(e=>{-1===["src","href","rel","content","colspan","rowspan"].indexOf(e.name.toLowerCase())&&t.removeAttribute(e.name)})}break;case Node.TEXT_NODE:break;default:o.push(t)}}),n.safeRemove.apply(null,o),e=i.innerHTML}catch(t){}return e&&(t=e),(t=t.split(/(\n)/).filter(r).join("\n")).replace(/<(\/)?(html|colgroup|col|o:p)[^>]*>/g,"").replace(/<!--[^>]*>/g,"")}const c=t.Jodit.plugins.get("paste-from-word");if(c){const t=c.prototype.insertFromWordByType;c.prototype.insertFromWordByType=function(e,i,o,s){"insert_by_clean_paste"===o?this.j.selection.insertHTML(l(i)):t.apply(this,[e,i,o,s])}}t.Jodit.plugins.add("paste-patch",class{init(t){this.jodit=t,this.jodit.events.on("onCustomPasteHTMLOption",(t,e)=>{if("insert_by_clean_paste"===t)return l(e)})}});t.Jodit.plugins.add("current-instance",class{init(t){this.jodit=t,this.onFocusFunc=this.onFocus.bind(this),t.events.on("focus",this.onFocusFunc)}destruct(){this.jodit.events.off("focus",this.onFocusFunc),t.Jodit.currentInstance===this.jodit&&(t.Jodit.currentInstance=null)}onFocus(e){t.Jodit.currentInstance=this.jodit}});t.Jodit.plugins.add("block-normalizer",class{init(t){this.jodit=t,this.onBlurFunc=this.onBlur.bind(this),t.events.on("blur",this.onBlurFunc)}destruct(){this.jodit.events.off("blur",this.onBlurFunc)}onBlur(t){"<p><br></p>"===this.jodit.value&&(this.jodit.value="")}});t.Jodit.plugins.add("html-sanitizer",class{init(t){this.jodit=t,this.sanitizeFunc=this.sanitize.bind(this),this.sanitizePasteFunc=this.sanitizePaste.bind(this),t.events.on("change",this.sanitizeFunc),t.events.on("processPaste",this.sanitizePasteFunc)}destruct(){this.jodit.events.off("change",this.sanitizeFunc),this.jodit.events.off("processPaste",this.sanitizePasteFunc)}sanitize(){this.removeUnsafeAttributes(this.jodit.editor)&&this.jodit.synchronizeValues()}sanitizePaste(t,e,i){const o=document.createElement("div");return o.innerHTML=e,this.removeUnsafeAttributes(o)?o.innerHTML:e}removeUnsafeAttributes(t){let e=!1;return t.querySelectorAll("*").forEach(t=>{[...t.attributes].forEach(i=>{i.name.match(/^(href|src|action)$/i)&&i.value.match(/^javascript:/i)&&(t.removeAttribute(i.name),e=!0),i.name.match(/^on/i)&&(t.removeAttribute(i.name),e=!0)})}),e}});var d={en:{iframePropsProperties:"Iframe properties",iframePropsWidth:"Width",iframePropsHeight:"Height",iframePropsTitle:"Title"},ja:{iframePropsProperties:"インラインフレームのプロパティ",iframePropsWidth:"幅",iframePropsHeight:"高さ",iframePropsTitle:"タイトル"}};Object.keys(d).forEach(e=>{t.Jodit.lang[e]={...t.Jodit.lang[e],...d[e]}}),t.Jodit.plugins.add("iframe-props",class{init(t){this.jodit=t,this.onDblClickFunc=this.onDblClick.bind(this),t.events.on("dblclick",this.onDblClickFunc)}destruct(){this.jodit.events.off("dblclick",this.onDblClickFunc)}onDblClick(t){if("JODIT"===t.target.tagName){const e=t.target.querySelector("iframe");e&&(this.showDialog(e,t.target),t.preventDefault())}}showDialog(e,i){const o=this.jodit.dlg({closeOnClickOverlay:!0,closeOnEsc:!0,buttons:["fullsize","dialog.close"]}),{UIForm:s,UIInput:n,Button:a}=t.Jodit.modules,r=new s(this.jodit);r.container.classList.add("jodit-ui-form__iframe-properties");const l={src:new n(this.jodit,{name:"src",label:"URL",required:!0}),width:new n(this.jodit,{name:"width",label:this.jodit.i18n("iframePropsWidth")}),height:new n(this.jodit,{name:"height",label:this.jodit.i18n("iframePropsHeight")}),title:new n(this.jodit,{name:"title",label:this.jodit.i18n("iframePropsTitle")})};r.append(Object.values(l)),this.read(e,l);const c={cancel:new a(this.jodit,"cancel","Cancel"),apply:new a(this.jodit,"ok","Apply","primary")};c.apply.onAction(()=>{r.validate()&&(this.write(e,i,l),this.jodit.synchronizeValues(),o.close())}),c.cancel.onAction(()=>{o.close()}),o.setHeader(this.jodit.i18n("iframePropsProperties")),o.setContent(r),o.setFooter(Object.values(c)),o.setSize(500,400),o.open(),o.setModal(!0)}read(t,e){["src","width","height","title"].forEach(i=>{e[i].value=t.getAttribute(i)||""})}write(t,e,i){["src","width","height","title"].forEach(o=>{i[o].value?(t.setAttribute(o,i[o].value),e.style[o]=i[o].value):(t.removeAttribute(o),e.style[o]="")}),["width","height"].forEach(t=>{i[t].value?e.style[t]=i[t].value:e.style[t]=""})}});var p={en:{tableCellTypeToTH:"convert to TH",tableCellTypeToTD:"convert to TD"},ja:{tableCellTypeToTH:"THに変更",tableCellTypeToTD:"TDに変更"}};Object.keys(p).forEach(e=>{t.Jodit.lang[e]={...t.Jodit.lang[e],...p[e]}}),t.Jodit.plugins.add("table-cell-type",class{init(e){this.jodit=e,e.options.popup.cells=t.Jodit.atom([{name:"cellToTH",text:"TH",tooltip:e.i18n("tableCellTypeToTH"),exec:()=>{this.convertTo("th")}},{name:"cellToTD",text:"TD",tooltip:e.i18n("tableCellTypeToTD"),exec:()=>{this.convertTo("td")}},"\n",...e.options.popup.cells])}convertTo(t){const e=this.jodit.getInstance("Table",this.jodit.options);e&&e.getAllSelectedCells().forEach(i=>{if(e.removeSelection(i),i.tagName.toLowerCase()!==t){const e=this.createNewCell(i,t);i.parentNode.replaceChild(e,i)}})}createNewCell(t,e){const i=this.jodit.createInside.element(e);return i.innerHTML=t.innerHTML,[...t.attributes].forEach(t=>{i.setAttribute(t.name,t.value)}),i}});var h={en:{templateInsertTemplate:"Insert template"},ja:{templateInsertTemplate:"テンプレート挿入"}};Object.keys(h).forEach(e=>{t.Jodit.lang[e]={...t.Jodit.lang[e],...h[e]}}),t.Jodit.plugins.add("template",class{static templates=[{name:"sample_template",title:"Sample Template",html:"<p>Sample template</p>"}];init(t){this.jodit=t,this.templateList={},this.templateHTML={},(t.options.templates||this.constructor.templates).forEach(t=>{this.templateList[t.name]=t.title,this.templateHTML[t.name]=t.html}),t.options.controls.template={name:"template",icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640">\x3c!--!Font Awesome Free v7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--\x3e<path d="M128.1 64C92.8 64 64.1 92.7 64.1 128L64.1 512C64.1 547.3 92.8 576 128.1 576L274.3 576L285.2 521.5C289.5 499.8 300.2 479.9 315.8 464.3L448 332.1L448 234.6C448 217.6 441.3 201.3 429.3 189.3L322.8 82.7C310.8 70.7 294.5 64 277.6 64L128.1 64zM389.6 240L296.1 240C282.8 240 272.1 229.3 272.1 216L272.1 122.5L389.6 240zM332.3 530.9L320.4 590.5C320.2 591.4 320.1 592.4 320.1 593.4C320.1 601.4 326.6 608 334.7 608C335.7 608 336.6 607.9 337.6 607.7L397.2 595.8C409.6 593.3 421 587.2 429.9 578.3L548.8 459.4L468.8 379.4L349.9 498.3C341 507.2 334.9 518.6 332.4 531zM600.1 407.9C622.2 385.8 622.2 350 600.1 327.9C578 305.8 542.2 305.8 520.1 327.9L491.3 356.7L571.3 436.7L600.1 407.9z"/></svg>\n',tooltip:t.i18n("templateInsertTemplate"),list:this.templateList,exec:this.exec.bind(this)}}exec(t,e,i){let{button:o}=i;if("template"===o.name)return!1;const s=this.templateHTML[o.name];return s&&t.selection.insertHTML(s),null}});var u={en:{videoPropsPosterURL:"Poster image URL",videoPropsProperties:"Video properties"},ja:{videoPropsPosterURL:"ポスター画像URL",videoPropsProperties:"動画のプロパティ"}};Object.keys(u).forEach(e=>{t.Jodit.lang[e]={...t.Jodit.lang[e],...u[e]}}),t.Jodit.plugins.add("video-props",class{init(t){this.jodit=t,this.onDblClickFunc=this.onDblClick.bind(this),this.jodit.events.on("dblclick",this.onDblClickFunc)}destruct(){this.jodit.events.off("dblclick",this.onDblClickFunc)}onDblClick(t){if("JODIT-MEDIA"===t.target.tagName){const e=t.target.querySelector("video");e&&(this.showDialog(e,t.target),t.preventDefault())}}showDialog(e,i){const o=this.jodit.dlg({closeOnClickOverlay:!0,closeOnEsc:!0,buttons:["fullsize","dialog.close"]}),{UIForm:s,UIInput:n,Button:a}=t.Jodit.modules,r=new s(this.jodit);r.container.classList.add("jodit-ui-form__video-properties");const l={src:new n(this.jodit,{name:"src",label:"URL",required:!0}),width:new n(this.jodit,{name:"width",label:this.jodit.i18n("Width")}),height:new n(this.jodit,{name:"height",label:this.jodit.i18n("Height")}),poster:new n(this.jodit,{name:"poster",label:this.jodit.i18n("videoPropsPosterURL")})};r.append(Object.values(l)),this.read(e,l);const c={cancel:new a(this.jodit,"cancel","Cancel"),apply:new a(this.jodit,"ok","Apply","primary")};c.apply.onAction(()=>{r.validate()&&(this.write(e,i,l),this.jodit.synchronizeValues(),o.close())}),c.cancel.onAction(()=>{o.close()}),o.setHeader(this.jodit.i18n("videoPropsProperties")),o.setContent(r),o.setFooter(Object.values(c)),o.setSize(500,400),o.open(),o.setModal(!0)}read(t,e){["src","width","height","poster"].forEach(i=>{e[i].value=t.getAttribute(i)||""})}write(t,e,i){["src","width","height","poster"].forEach(e=>{i[e].value?t.setAttribute(e,i[e].value):t.removeAttribute(e)}),["width","height"].forEach(t=>{i[t].value?e.style[t]=`${i[t].value}px`:e.style[t]=""})}});var m={en:{videoTagInsertVideo:"Insert video"},ja:{videoTagInsertVideo:"動画を挿入"}};Object.keys(m).forEach(e=>{t.Jodit.lang[e]={...t.Jodit.lang[e],...m[e]}}),t.Jodit.plugins.add("video-tag",class{init(t){this.jodit=t,t.options.controls.videoTag={name:"videoTag",icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640">\x3c!--!Font Awesome Free v7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--\x3e<path d="M128 128C92.7 128 64 156.7 64 192L64 448C64 483.3 92.7 512 128 512L384 512C419.3 512 448 483.3 448 448L448 192C448 156.7 419.3 128 384 128L128 128zM496 400L569.5 458.8C573.7 462.2 578.9 464 584.3 464C597.4 464 608 453.4 608 440.3L608 199.7C608 186.6 597.4 176 584.3 176C578.9 176 573.7 177.8 569.5 181.2L496 240L496 400z"/></svg>\n',tooltip:t.i18n("videoTagInsertVideo"),popup:this.popup.bind(this)}}popupHTML(){return`\n      <form class="jodit-ui-form">\n        <div class="jodit-ui-input">\n          <span class="jodit-ui-input__label">URL</span>\n          <div class="jodit-ui-input__wrapper">\n            <input type="text" placeholder="https://" class="jodit-ui-input__input" style="width: 150px;">\n          </div>\n        </div>\n        <div class="jodit-ui-block">\n          <button class="jodit-ui-button jodit-ui-button_variant_primary">${this.jodit.i18n("Insert")}</button>\n        </div>\n      </form>\n    `}popup(t,e,i){const o=t.createInside.fromHTML(this.popupHTML()),s=o.querySelector("input"),n=o.querySelector("button");return s.addEventListener("keydown",t=>{"Enter"===t.key&&n.click()}),t.selection.save(),n.addEventListener("click",e=>{if(s.value){const e=this.buildHTML(s.value);t.selection.restore(),t.selection.insertHTML(e)}i()}),o}buildHTML(t){const e=this.jodit.options.video.defaultWidth,i=this.jodit.options.video.defaultHeight,o=this.jodit.options.video.parseUrlToVideoEmbed(t,{width:e,height:i});return o!==t?o:`<video controls src="${t}" width="${e}" height="${i}"></video>`}});
//# sourceMappingURL=index.js.map
